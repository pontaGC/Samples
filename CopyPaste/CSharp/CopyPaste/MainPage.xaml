<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:CopyPaste"
             xmlns:cirlce="clr-namespace:CopyPaste.CircleView"
             xmlns:converter="clr-namespace:CopyPaste.Converters"
             x:Class="CopyPaste.MainPage"
             x:DataType="local:MainPageViewModel">
    <ContentPage.Resources>
        <ResourceDictionary>
            <converter:ColorToBrushConverter x:Key="colorToBrushConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
    <ScrollView>
        <Grid>
            <CollectionView ItemsSource="{Binding CircleViewModels, Mode=OneTime}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="cirlce:CircleViewModel">
                        <local:PanContainer
                            PanAreaWidth="{Binding Path=Width, Source={RelativeSource Mode=FindAncestor, AncestorType={x:Type Grid}}}"
                            PanAreaHeight="{Binding Path=Height, Source={RelativeSource Mode=FindAncestor, AncestorType={x:Type Grid}}}">
                            <Ellipse WidthRequest="50"
                                     HeightRequest="50"
                                     Fill="{Binding FillColor, Converter={StaticResource colorToBrushConverter}}"
                                     Stroke="{Binding StrokeColor, Converter={StaticResource colorToBrushConverter}}"
                                     StrokeThickness="2"
                                     HorizontalOptions="Start"
                                     VerticalOptions="Start"
                                     TranslationX="{Binding PositionX}"
                                     TranslationY="{Binding PositionY}">
                            </Ellipse>
                        </local:PanContainer>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
    </ScrollView>

</ContentPage>
